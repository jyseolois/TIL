# 링커

- 링커는 컴파일러가 생성한 파일 여러 개를 묶어 하나의 실행 파일을 생성한다.
- 소스 코드를 담고 있는 파일을 컴파일하면 기계 명렁어에 해당하는 코드를 저장하는 파일이 생성되는데, 이 파일을 대상 파일(.o, object file)이라고 한다. 

## 링커는 이렇게 일한다
- 심벌 해석(symbol resolution): 링커는 모듈 사이의 종속성(dependency)가 올바르게 설정되어 있는지, 즉, 인터페이스 구현이 종속된 모듈에서 사용 가능한지 확인한다. 우리가 참조하고 있는 외부 심벌(external symbol)에 대한 실제 구현이 어느 모듈이든지 단 하나만 있어야 하고, 링커는 이를 찾아내 연결하는 작업을 하는 것이다.
- 실행 파일 생성: 링커는 대상 파일을 모두 모아 하나의 실행 파일로 만든다.
- 재배치(relocation): 한 소스 파일에서 다른 모듈에 정의되어 있는 함수를 참조할 때, 컴파일러가 소스 파일을 컴파일하는 시점에는 함수가 어느 메모리 주소(memory address)에 위치할지 정확하게 알 수 없기 때문에 일단은 N으로 표시해두고 넘어가면, 링커가 이런 표시들을 확인하고 한데 모아 실행 파일을 생성하는 과정에서 함수의 정확한 주소를 확인하고 실제 메모리 주소로 대체해 준다.

## 심벌 해석: 수요와 공급
- 심벌(symbol): 전역 변수(global variable)과 함수(function)의 이름을 포함하는 모든 변수의 이름. 단, 지역 변수(local variable)은 모듈 내에서만 사용되어 외부 모듈에서 참조할 수 없기 때문에, 링커의 관심 대상이 아니다.
- 링커는 대상 파일에서 참조하고 있는 각각의 모든 외부 심벌마다 대상 정의가 반드시 존재하는지, 또, 단 하나만 존재하는지 확인해야 한다.
- 컴파일러는 인간이 이해할 수 있는 코드를 기계 명령어로 생성할 때 이 명령어를 실행시키는 데이터도 생성해서 대상 파일에 포함시킨다. 즉, 대상 파일은 두 가지 부분으로 나뉜다:
  1) 코드 영역(code section): 명령어 부분. 소스 파일에 정의된 함수에서 변환된 기계 명령어가 저장되는 부분.
  2) 데이터 영역(data section): 소스 파일의 전역 변수가 저장되는 부분. (로컬 변수는 프로그램이 실행된 후 스택 영역에서 생성되고 사용하면 제거되기 때문에, 대상 파일에는 별도로 저장되지 않는다)
  3) 심벌 테이블(symbol table): 소스 파일마다 외부에서 참조 가능한 심벌이 어떤 것인지(해당 소스 파일이 정의한 심벌), 또한 반대로 어떤 외부 심벌을 침조하고 있는지(해당 소스 파일이 사용하는 외부 심벌)에 대한 정보를 표에 기록한다. 
- 링커는 각 대상 파일에서 사용할 외부 심벌이 심벌 테이블에서 유일한 정의(unique definition)를 발견 가능한지 확인하는 작업을 담당하는데, 이게 바로 심벌 해석이다. 참조된 변수나 함수 정의를 찾는 것이다. 
- 만약 심벌에 대한 참조가 없으면, 즉, 어떤 함수가 참조되었지만 정의되지 않았다면, 링커는 오류를 발생시킨다.