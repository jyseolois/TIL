# 코루틴(coroutine)

## 일반 함수
- 일반 함수는 return 명령어를 만나거나 코드의 마지막 줄까지 실행되어야 반환이 가능하다. 또 해당 함수가 재호출되면, 다시 처음부터 시작하여 반환될 때까지 모든 줄을 하나씩 실행한다.
  
## 일반 함수에서 코루틴으로
- 코루틴에는 스레드와 유사한 기능인 일시 중지와 재개 기능이 있다.
- 코루틴은 자신의 실행 상태를 저장할 수 있기 때문에, 코루틴이 반환된 후에도 계속 호출이 가능하며, 마지막으로 일시 중지된 지점에서 다시 이어서 실행된다. 호출한 쪽에서 코루틴을 호출할 때마다 해당 코루틴은 이전에 반환되었던 지점부터 다시 계속 실행될 수 있는 것이다.
- 일반 함수는 반환된 후에 프로세스 주소 공간의 스택 영역에 함수 실행 시 정보를 저장하지 않지만, 코루틴이 반환될 때는 함수의 실행 시 정보를 저장할 필요가 있는데, 코루틴이 실행이 멈추었던 지점에서 다시 실행할 때 이 정보가 필요하기 때문이다. 이처럼 코루틴은 자신의 이전 실행 상태를 기억하고 있다가, 다시 실행될 때 이전에 일시 중지되었던 지점에서 계속 실행이 가능한 매우 신기한 함수이다.

## 직관적인 코루틴 설명
- 한 함수가 코루틴을 실행해서 코루틴이 시작되면 첫 번째 연결 시작 지점까지 실행하다가, 다시 호출한 함수로 돌아간다. 함수는 이어서 실행되다가 다시 해당 코루틴을 실행한다. 그럼 코루틴은 첫 번째 줄의 코드부터 실행되는 것이 아니라, 앞의 연결 시작 지점부터 실행된다. 다시금 두 번째 연결 시작 지점을 만나고, 이번에도 호출한 함수로 돌아간다. 마지막으로 함수의 나머지 부분이 실행되고 전체 프로그램이 종료된다.
