# 스레드간 공유되는 프로세스 리소스

## 스레드 전용 리소스(thread-private resources)
- 상태 변화 관점에서 보면 스레드는 사실 함수 실행이다. CPU는 하나의 진입 함수의 명령어를 실행해서 실행 흐름인 스레드를 형성하기 때문이다.
- 그렇다면 바로 함수 실행에 필요한 정보가 스레드 전용 리소스라는 뜻이다.
- 함수의 실행 시간 정보는 스택 영역을 구성하는 스택 프레임에 저장된다. 이때 스택 프레임에는 함수의 반환값, 다른 함수를 호출할 때 전달되는 매개변수, 함수 내에서 사용되는 지역 변수와 레지스터 정보가 저장된다.
- 각 스레드는 자신만 사용할 수 있는 스택 영역을 가지므로, 스레드가 여러 개 있을 때는 여러 스택 영역이 존재하게 되는 것이다.
- 스택 영역 외에는 다음에 실행될 명령어 주소를 저장하는 PC 레지스터(register), 스레드 스택 영역에서 스택 상단(setack top) 위치를 저장하는 스택 포인터(stack pointer) 등 CPU가 기계 명령어를 실행할 때 내부 레지스터 값도 스레드의 현재 실행 상태에 속한다. 이런 레지스터 정보도 역시 스레드 전용으로, 다른 스레드에서는 이런 레지스터 정보에 접근할 수 없다.
- 스레드 상황 정보(thread context): 스레드에 속한 스택 영역, 프로그램 카운터, 스택 포인터, 함수 실행 시 사용되는 레지스터 정보를 통틀어 스레드 상황 정보(thread context)라고 한다.
- 전용 리소스를 제외한 나머지는 모두 스레드 간에 공유되는 리소스에 해당한다. 즉, 스레드는 프로세스 주소 공간에서 스택 영역을 제외한 나머지 영역(힙, 데이터, 코드)를 모두 공유한다. 